[
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_START",
    "condition": { "not": { "u_has_effect": "effect_wind_following_steps" } },
    "effect": [
      { "u_add_effect": "effect_wind_following_steps", "duration": "PERMANENT" },
      {
        "run_eocs": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
        "time_in_future": [
          { "math": [ "(u_spell_level('wind_following_steps') * 5)" ] },
          { "math": [ "(u_spell_level('wind_following_steps') * 10)" ] }
        ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_WIND_FOLLOWING_STEPS_STOP" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
    "condition": { "and": [ { "u_has_effect": "effect_wind_following_steps" }, { "math": [ "u_vitamin('qi_vitamin') >= 50" ] } ] },
    "effect": [
      { "run_eocs": "EOC_LOSE_50_QI" },
      {
        "run_eocs": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
        "time_in_future": [
          { "math": [ "(u_spell_level('wind_following_steps') * 5)" ] },
          { "math": [ "(u_spell_level('wind_following_steps') * 10)" ] }
        ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_WIND_FOLLOWING_STEPS_STOP" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_STOP",
    "condition": { "u_has_effect": "effect_wind_following_steps" },
    "effect": [ { "u_lose_effect": "effect_wind_following_steps" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_START",
    "condition": {
      "or": [
        { "u_has_effect": "poison" },
        { "u_has_effect": "poison", "bodypart": "head" },
        { "u_has_effect": "poison", "bodypart": "torso" },
        { "u_has_effect": "poison", "bodypart": "arm_r" },
        { "u_has_effect": "poison", "bodypart": "arm_l" },
        { "u_has_effect": "poison", "bodypart": "leg_r" },
        { "u_has_effect": "poison", "bodypart": "leg_l" },
        { "u_has_effect": "badpoison" },
        { "u_has_effect": "badpoison", "bodypart": "head" },
        { "u_has_effect": "badpoison", "bodypart": "torso" },
        { "u_has_effect": "badpoison", "bodypart": "arm_r" },
        { "u_has_effect": "badpoison", "bodypart": "arm_l" },
        { "u_has_effect": "badpoison", "bodypart": "leg_r" },
        { "u_has_effect": "badpoison", "bodypart": "leg_l" },
        { "u_has_effect": "venom_dmg" },
        { "u_has_effect": "venom_weaken" },
        { "u_has_effect": "venom_blind" },
        { "u_has_effect": "venom_pain" },
        { "u_has_effect": "paralyzepoison" }
      ]
    },
    "effect": [
      { "u_message": "Your body convulses as you feel the poison move inside you." },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_POISON",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_BADPOISON",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_VENOM",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      }
    ],
    "false_effect": [
      {
        "u_message": "You're not suffering from poisoning and have nothing to detoxify. You instead decide to practice with the needles.",
        "type": "mixed"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_POISON",
    "condition": {
      "or": [
        { "u_has_effect": "poison" },
        { "u_has_effect": "poison", "bodypart": "head" },
        { "u_has_effect": "poison", "bodypart": "torso" },
        { "u_has_effect": "poison", "bodypart": "arm_r" },
        { "u_has_effect": "poison", "bodypart": "arm_l" },
        { "u_has_effect": "poison", "bodypart": "leg_r" },
        { "u_has_effect": "poison", "bodypart": "leg_l" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_1", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      { "u_lose_effect": [ "poison" ], "target_part": "ALL" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_BADPOISON",
    "condition": {
      "or": [
        { "u_has_effect": "badpoison" },
        { "u_has_effect": "badpoison", "bodypart": "head" },
        { "u_has_effect": "badpoison", "bodypart": "torso" },
        { "u_has_effect": "badpoison", "bodypart": "arm_r" },
        { "u_has_effect": "badpoison", "bodypart": "arm_l" },
        { "u_has_effect": "badpoison", "bodypart": "leg_r" },
        { "u_has_effect": "badpoison", "bodypart": "leg_l" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_2", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      { "u_lose_effect": [ "badpoison" ], "target_part": "ALL" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_VENOM",
    "condition": {
      "or": [
        { "u_has_effect": "venom_dmg" },
        { "u_has_effect": "venom_weaken" },
        { "u_has_effect": "venom_blind" },
        { "u_has_effect": "venom_pain" },
        { "u_has_effect": "paralyzepoison" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_1", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      {
        "u_lose_effect": [ "venom_dmg", "venom_weaken", "venom_blind", "venom_pain", "paralyzepoison" ],
        "target_part": "ALL"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SOUL_BURNING_MERIDIAN_REVERSAL_CONFIRM",
    "condition": { "not": { "or": [ { "u_has_effect": "qi_deviation_stat_boost" }, { "u_has_effect": "qi_deviation_stat_negative" } ] } },
    "effect": [
      {
        "run_eoc_selector": [ "EOC_SOUL_BURNING_MERIDIAN_REVERSAL", "EOC_SOUL_BURNING_MERIDIAN_REVERSAL_NOTHING" ],
        "allow_cancel": true,
        "names": [ "Yes", "No" ],
        "title": "Are you sure?",
        "descriptions": [ "You do not fear death.", "I am not ready for what is to come." ]
      }
    ],
    "false_effect": [ { "u_message": "You are already in a state of qi deviation.", "type": "mixed" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SOUL_BURNING_MERIDIAN_REVERSAL_NOTHING",
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SOUL_BURNING_MERIDIAN_REVERSAL",
    "effect": [
      {
        "u_message": "You stab your chest, fingers drilling into your veins. You gaze out, taking in the scenery for what will most likely be your final stand."
      },
      { "u_add_effect": "qi_deviation_stat_boost", "duration": "5 minutes" },
      { "u_add_effect": "effect_dot_qi_recovery_tier_4", "duration": "5 minutes" },
      { "run_eocs": "EOC_QI_DEVIATION_BREAK_AND_BLEED_LEFT_ARM", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_QI_DEVIATION_BREAK_AND_BLEED_RIGHT_LEG", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_QI_DEVIATION_BREAK_AND_BLEED_RIGHT_ARM", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_QI_DEVIATION_BREAK_AND_BLEED_LEFT_LEG", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_QI_DEVIATION_HEAD_BLEED", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_QI_DEVIATION_TORSO_BLEED", "time_in_future": [ "1 minute", "5 minutes" ] },
      { "run_eocs": "EOC_SOUL_BURNING_MERIDIAN_REVERSAL_DRAWBACK", "time_in_future": "5 minutes" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SOUL_BURNING_MERIDIAN_REVERSAL_DRAWBACK",
    "effect": [
      { "u_add_effect": "qi_deviation_stat_negative", "duration": "1 day" },
      { "u_add_effect": "effect_dot_qi_drain_tier_4", "duration": "1 day" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_BREAK_AND_BLEED_LEFT_LEG",
    "effect": [
      { "u_message": "Your left leg explodes in gore!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "leg_l", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('leg_l') -= 999" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_BREAK_AND_BLEED_RIGHT_LEG",
    "effect": [
      { "u_message": "Your right leg explodes in gore!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "leg_r", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('leg_r') -= 999" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_BREAK_AND_BLEED_LEFT_ARM",
    "effect": [
      { "u_message": "Your left arm explodes in gore!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "arm_l", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('arm_l') -= 999" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_BREAK_AND_BLEED_RIGHT_ARM",
    "effect": [
      { "u_message": "Your right arm explodes in gore!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "arm_r", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('arm_r') -= 999" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_HEAD_BLEED",
    "effect": [
      { "u_message": "Your head throbs and blood flows out of your orifaces freely!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "head", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('head') -= 40" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_QI_DEVIATION_TORSO_BLEED",
    "effect": [
      { "u_message": "Your chest contorts and collapses on itself!", "type": "bad" },
      { "u_add_effect": "bleed", "target_part": "torso", "duration": [ 1200, 2000 ] },
      { "math": [ "u_hp('torso') -= 40" ] }
    ]
  }
]
