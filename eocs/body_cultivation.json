[
  {
    "type": "effect_on_condition",
    "id": "EOC_BODY_TEMPERING",
    "effect": [
      { "run_eocs": [ "EOC_BODY_TEMPERING_SELECT_BODY_PART" ] },
      { "set_string_var": "<u_val:u_tempering_body_part>", "target_var": { "context_val": "tempering_body_part" } },
      { "message": "Body Part: <u_val:u_tempering_body_part>" },
      { "message": "Body Part2: <context_val:tempering_body_part>" },
      { "message": "Body Part3: u_val('tempering_body_part')" },
      { "message": "Body Part4: u_val('u_tempering_body_part')" },
      { "message": "Gritting your teeth you slam down onto yourself, hammering at your own body." },
      { "math": [ "u_hp(torso) -= 20" ] },
      { "u_add_effect": "effect_tempering_in_progress", "target_part": "torso", "duration": "PERMANENT" },
      {
        "if": {
          "and": [
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "arm_l" },
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "arm_r" },
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "leg_l" },
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "leg_r" },
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "torso" },
            { "u_has_effect": "effect_tempering_in_progress", "bodypart": "head" }
          ]
        },
        "then": [
          { "u_forget_recipe": "ritual_body_tempered" },
          { "u_lose_effect": "effect_tempering_in_progress" },
          { "u_add_effect": "effect_body_tempered", "duration": "PERMANENT" }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BODY_TEMPERING_SELECT_BODY_PART",
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "head" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "head" }
      },
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "torso" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "torso" }
      },
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "arm_r" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "arm_r" }
      },
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "leg_l" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "leg_l" }
      },
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "arm_l" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "arm_l" }
      },
      {
        "if": { "not": { "u_has_effect": "effect_tempering_in_progress", "bodypart": "leg_r" } },
        "then": { "u_add_var": "u_tempering_body_part", "value": "leg_r" }
      }
    ]
  }
]
