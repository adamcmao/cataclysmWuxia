[
  {
    "type": "effect_on_condition",
    "id": "EOC_UNLOCK_MEDITATE",
    "eoc_type": "EVENT",
    "required_event": "game_start",
    "effect": [ { "u_learn_recipe": "meditate_to_restore_qi" }, { "u_learn_recipe": "ritual_body_tempered" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_UNLOCK_TEST_QI",
    "eoc_type": "EVENT",
    "required_event": "game_start",
    "effect": [
      { "math": [ "u_spell_level('gain_all_qi') = 0" ] },
      { "math": [ "u_spell_level('lose_all_qi') = 0" ] },
      { "math": [ "u_spell_level('gain_100_qi') = 0" ] },
      { "math": [ "u_spell_level('lose_100_qi') = 0" ] },
      { "u_message": "You learn DEBUG skills." }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_SKILLS",
    "effect": [
      { "run_eocs": [ "EOC_MEDITATE_LEARN_ORTHODOX", "EOC_MEDITATE_LEARN_UNORTHODOX", "EOC_MEDITATE_LEARN_DEMONIC" ] },
      { "run_eocs": [ "EOC_MEDITATE_LEARN_SKILLS" ], "time_in_future": [ "5 minutes", "15 minutes" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PICK_CLASS",
    "condition": { "not": { "or": [ { "u_has_trait": "ORTHODOX" }, { "u_has_trait": "UNORTHODOX" }, { "u_has_trait": "DEMONIC" } ] } },
    "effect": [
      {
        "run_eoc_selector": [ "EOC_BECOME_ORTHODOX", "EOC_BECOME_UNORTHODOX", "EOC_BECOME_DEMONIC" ],
        "allow_cancel": true,
        "names": [ "Orthodox", "Unorthodox", "Demonic" ],
        "title": "Pick your path.",
        "descriptions": [ "Be just and true.", "Follow your own path", "Break the taboos." ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BECOME_ORTHODOX",
    "effect": [ { "u_add_trait": "ORTHODOX" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BECOME_UNORTHODOX",
    "effect": [ { "u_add_trait": "UNORTHODOX" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BECOME_DEMONIC",
    "effect": [ { "u_add_trait": "DEMONIC" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_ORTHODOX",
    "condition": { "u_has_trait": "ORTHODOX" },
    "effect": [
      {
        "run_eocs": [
          "EOC_MEDITATE_LEARN_BEGGAR",
          "EOC_MEDITATE_LEARN_DIVINE_DOCTOR",
          "EOC_MEDITATE_LEARN_FORMATIONS",
          "EOC_MEDITATE_LEARN_HUA",
          "EOC_MEDITATE_LEARN_SHAOLIN"
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_BEGGAR",
    "condition": { "and": [ { "u_has_wielded_with_weapon_category": "QUARTERSTAVES" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": [
      {
        "weighted_list_eocs": [
          [ "EOC_LEVEL_UP_HIDDEN_ALLEY_RAT_TIDE", 1 ],
          [ "EOC_LEVEL_UP_STICK_SNAGS_THE_SLEEVE", 1 ],
          [ "EOC_LEVEL_UP_PIERCE_THE_ALLEY", 1 ],
          [ "EOC_LEVEL_UP_DOG_BEATING_STAFF_TECHNIQUE", 1 ],
          [ "EOC_LEVEL_UP_DOG_STAFF_TURNS_BEGGAR_FIRM", 1 ]
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_HIDDEN_ALLEY_RAT_TIDE",
    "condition": { "math": [ "u_spell_level('beggar_hidden_alley_rat_tide') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Hidden Alley Rat Tide", "popup": true },
      { "math": [ "u_spell_level('beggar_hidden_alley_rat_tide') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('beggar_hidden_alley_rat_tide') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_STICK_SNAGS_THE_SLEEVE",
    "condition": { "math": [ "u_spell_level('beggar_stick_snags_the_sleeve') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Stick Snags The Sleeve", "popup": true },
      { "math": [ "u_spell_level('beggar_stick_snags_the_sleeve') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('beggar_stick_snags_the_sleeve') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_PIERCE_THE_ALLEY",
    "condition": { "math": [ "u_spell_level('beggar_pierce_the_alley') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Pierce The Alley", "popup": true },
      { "math": [ "u_spell_level('beggar_pierce_the_alley') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('beggar_pierce_the_alley') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_DOG_BEATING_STAFF_TECHNIQUE",
    "condition": { "math": [ "u_spell_level('beggar_dog_beating_staff_technique') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Dog Beating Staff Technique", "popup": true },
      { "math": [ "u_spell_level('beggar_dog_beating_staff_technique') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('beggar_dog_beating_staff_technique') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_DOG_STAFF_TURNS_BEGGAR_FIRM",
    "condition": { "math": [ "u_spell_level('beggar_staff_turns_beggar_firm') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Staff Turns Beggar Firm", "popup": true },
      { "math": [ "u_spell_level('beggar_staff_turns_beggar_firm') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('beggar_staff_turns_beggar_firm') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_DIVINE_DOCTOR",
    "//condition": "TODO: Figure out more details",
    "condition": { "and": [ { "math": [ "rand(30) == 1" ] } ] },
    "effect": [ { "weighted_list_eocs": [ [ "EOC_LEVEL_UP_THREE_NEEDLES_DRAW_VENOM", 1 ] ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_THREE_NEEDLES_DRAW_VENOM",
    "condition": { "math": [ "u_spell_level('divine_doctor_three_needles_draw_venom') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Three Needles Draw Venom", "popup": true },
      { "math": [ "u_spell_level('divine_doctor_three_needles_draw_venom') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('divine_doctor_three_needles_draw_venom') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_FORMATIONS",
    "//condition": "TODO: Figure out more details",
    "condition": { "and": [ { "math": [ "rand(30) == 1" ] } ] },
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_HUA",
    "condition": {
      "and": [
        {
          "or": [
            { "u_has_wielded_with_weapon_category": "MEDIUM_SWORDS" },
            { "u_has_wielded_with_weapon_category": "LONG_SWORDS" },
            { "u_has_wielded_with_weapon_category": "SHORT_SWORDS" },
            { "u_has_wielded_with_weapon_category": "LONG_THRUSTING_SWORDS" },
            { "u_has_wielded_with_weapon_category": "BIONIC_SWORDS" },
            { "u_has_wielded_with_weapon_category": "GREAT_SWORDS" }
          ]
        },
        { "math": [ "rand(30) == 1" ] }
      ]
    },
    "effect": [
      {
        "weighted_list_eocs": [
          [ "EOC_LEVEL_UP_HEAVENS_BLINK", 1 ],
          [ "EOC_LEVEL_UP_STILL_WATER_BREAKS_THE_BLADE", 1 ],
          [ "EOC_LEVEL_UP_SKY_PIERCING_SWORD", 1 ],
          [ "EOC_LEVEL_UP_CIRCULAR_SWORD", 1 ]
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_HEAVENS_BLINK",
    "condition": { "math": [ "u_spell_level('hua_heavens_blink') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Heavens Blink", "popup": true },
      { "math": [ "u_spell_level('hua_heavens_blink') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('hua_heavens_blink') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_STILL_WATER_BREAKS_THE_BLADE",
    "condition": { "math": [ "u_spell_level('hua_still_water_breaks_the_blade') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Still Water Breaks The Blade", "popup": true },
      { "math": [ "u_spell_level('hua_still_water_breaks_the_blade') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('hua_still_water_breaks_the_blade') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_SKY_PIERCING_SWORD",
    "condition": { "math": [ "u_spell_level('hua_sky_piercing_sword') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Falling Star Scatters The Flock", "popup": true },
      { "math": [ "u_spell_level('hua_sky_piercing_sword') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('hua_sky_piercing_sword') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_CIRCULAR_SWORD",
    "condition": { "math": [ "u_spell_level('hua_circular_sword') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - White Crane Spreads Its Wings", "popup": true },
      { "math": [ "u_spell_level('hua_circular_sword') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('hua_circular_sword') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_SHAOLIN",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": [
      {
        "weighted_list_eocs": [
          [ "EOC_LEVEL_UP_FLOWING_WATER_PALM", 1 ],
          [ "EOC_LEVEL_UP_THREE_POINT_SEAL", 1 ],
          [ "EOC_LEVEL_UP_COUNTERING_STILL_HAND", 1 ],
          [ "EOC_LEVEL_UP_DRAGON_TAIL_STRIKE", 1 ],
          [ "EOC_LEVEL_UP_HEAVEN_EARTH_MORTAL", 1 ]
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_FLOWING_WATER_PALM",
    "condition": { "math": [ "u_spell_level('shaolin_flowing_water_palm') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Flowing Water Palm", "popup": true },
      { "math": [ "u_spell_level('shaolin_flowing_water_palm') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('shaolin_flowing_water_palm') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_THREE_POINT_SEAL",
    "condition": { "math": [ "u_spell_level('shaolin_three_point_seal') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Three Point Seal", "popup": true },
      { "math": [ "u_spell_level('shaolin_three_point_seal') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('shaolin_three_point_seal') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_COUNTERING_STILL_HAND",
    "condition": { "math": [ "u_spell_level('shaolin_countering_still_hand') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Countering Still Hand", "popup": true },
      { "math": [ "u_spell_level('shaolin_countering_still_hand') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('shaolin_countering_still_hand') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_DRAGON_TAIL_STRIKE",
    "condition": { "math": [ "u_spell_level('shaolin_dragon_tail_strike') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Dragon Tail Strike", "popup": true },
      { "math": [ "u_spell_level('shaolin_dragon_tail_strike') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('shaolin_dragon_tail_strike') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_HEAVEN_EARTH_MORTAL",
    "condition": { "math": [ "u_spell_level('shaolin_heaven_earth_mortal') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Heaven Earth Mortal", "popup": true },
      { "math": [ "u_spell_level('shaolin_heaven_earth_mortal') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('shaolin_heaven_earth_mortal') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_UNORTHODOX",
    "condition": { "u_has_trait": "UNORTHODOX" },
    "effect": [
      {
        "run_eocs": [
          "EOC_MEDITATE_LEARN_DRUNKEN_FIST",
          "EOC_MEDITATE_LEARN_FIVE_VENOMS",
          "EOC_MEDITATE_LEARN_HIDDEN_WEAPONS",
          "EOC_MEDITATE_LEARN_MOUNTAIN_SPLITTING_AXE",
          "EOC_MEDITATE_LEARN_SHADOWLESS_SWORD"
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_DRUNKEN_FIST",
    "//condition": "TODO: Figure this out, maybe while drunk?",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_FIVE_VENOMS",
    "//condition": "TODO: Figure this out, maybe while poisoned?",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_HIDDEN_WEAPONS",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_MOUNTAIN_SPLITTING_AXE",
    "condition": {
      "and": [
        {
          "or": [
            { "u_has_wielded_with_weapon_category": "GREAT_AXES" },
            { "u_has_wielded_with_weapon_category": "HAND_AXES" },
            { "u_has_wielded_with_weapon_category": "GREAT_HAMMERS" },
            { "u_has_wielded_with_weapon_category": "MACES" },
            { "u_has_wielded_with_weapon_category": "FLAILS" },
            { "u_has_wielded_with_weapon_category": "BATONS" }
          ]
        },
        { "math": [ "rand(30) == 1" ] }
      ]
    },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_SHADOWLESS_SWORD",
    "//condition": "TODO: Figure this out, probably w/sword at night, or maybe just night",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_DEMONIC",
    "condition": { "u_has_trait": "DEMONIC" },
    "effect": [
      {
        "run_eocs": [
          "EOC_MEDITATE_LEARN_BLOOD_SABRE",
          "EOC_MEDITATE_LEARN_FALLEN_BUDDHA_SPEAR",
          "EOC_MEDITATE_LEARN_GU",
          "EOC_MEDITATE_LEARN_JIANGSHI",
          "EOC_MEDITATE_LEARN_SOUL_DEVOURING_FINGER"
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_BLOOD_SABRE",
    "condition": { "math": [ "rand(30) == 1" ] },
    "effect": [
      { "u_location_variable": { "context_val": "bloody_ground" }, "field": "fd_blood", "target_max_radius": 1 },
      {
        "if": { "and": [ { "map_field_id": "fd_blood", "loc": { "context_val": "bloody_ground" } } ] },
        "then": {
          "weighted_list_eocs": [
            [ "EOC_LEVEL_UP_SCARLET_KNIFE_PULSE", 1 ],
            [ "EOC_LEVEL_UP_CRIMSON_BLOOD_SWORD", 1 ],
            [ "EOC_LEVEL_UP_FLOWING_BLOOD_BLADES", 1 ],
            [ "EOC_LEVEL_UP_DRIPPING_RED_RAIN", 1 ]
          ]
        }
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_SCARLET_KNIFE_PULSE",
    "condition": { "math": [ "u_spell_level('blood_sabre_scarlet_knife_pulse') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Scarlet Knife Pulse", "popup": true },
      { "math": [ "u_spell_level('blood_sabre_scarlet_knife_pulse') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('blood_sabre_scarlet_knife_pulse') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_CRIMSON_BLOOD_SWORD",
    "condition": { "math": [ "u_spell_level('blood_sabre_crimson_blood_sword') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Crimson Blood Sword", "popup": true },
      { "math": [ "u_spell_level('blood_sabre_crimson_blood_sword') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('blood_sabre_crimson_blood_sword') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_FLOWING_BLOOD_BLADES",
    "condition": { "math": [ "u_spell_level('blood_sabre_flowing_blood_blades') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Flowing Blood Blades", "popup": true },
      { "math": [ "u_spell_level('blood_sabre_flowing_blood_blades') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('blood_sabre_flowing_blood_blades') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_DRIPPING_RED_RAIN",
    "condition": { "math": [ "u_spell_level('blood_sabre_dripping_red_rain') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Dripping Red Rain", "popup": true },
      { "math": [ "u_spell_level('blood_sabre_dripping_red_rain') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('blood_sabre_dripping_red_rain') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_FALLEN_BUDDHA_SPEAR",
    "condition": { "and": [ { "u_has_wielded_with_weapon_category": "SPEARS" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [  ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_GU",
    "//condition": "TODO: Figure this out",
    "condition": { "and": [ { "math": [ "rand(30) == 1" ] } ] },
    "effect": { "weighted_list_eocs": [ [ "EOC_LEVEL_UP_RED_THREAD_BINDING", 1 ], [ "EOC_LEVEL_UP_RED_ASURA_REVIVAL_ART", 1 ] ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_RED_THREAD_BINDING",
    "condition": { "math": [ "u_spell_level('gu_red_thread_binding') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - RED_THREAD_BINDING", "popup": true },
      { "math": [ "u_spell_level('gu_red_thread_binding') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('gu_red_thread_binding') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_RED_ASURA_REVIVAL_ART",
    "condition": { "math": [ "u_spell_level('gu_red_asura_revival_art') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Red Asura Revival Art", "popup": true },
      { "math": [ "u_spell_level('gu_red_asura_revival_art') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('gu_red_asura_revival_art') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_JIANGSHI",
    "condition": { "math": [ "rand(30) == 1" ] },
    "effect": [
      { "u_location_variable": { "context_val": "loc" } },
      {
        "u_map_run_item_eocs": "random",
        "loc": { "context_val": "loc" },
        "search_data": [ { "category": "corpses" } ],
        "max_radius": 1,
        "true_eocs": [
          {
            "id": "EOC_MEDITATE_LEARN_JIANGSHI_SKILL",
            "effect": [
              {
                "weighted_list_eocs": [
                  [ "EOC_LEVEL_UP_YIN_ESSENCE_REFORGING", 1 ],
                  [ "EOC_LEVEL_UP_UNROTTING_CORPSE_ENHANCEMENT", 1 ],
                  [ "EOC_LEVEL_UP_GRAVE_MIST_DISAPPEARANCE", 1 ],
                  [ "EOC_LEARN_JIANGSHI_WHITE", 1 ],
                  [ "EOC_LEARN_WOODEN_CASKET", 1 ]
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_YIN_ESSENCE_REFORGING",
    "condition": { "math": [ "u_spell_level('jiangshi_yin_essence_reforging') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Yin Essence Reforging", "popup": true },
      { "math": [ "u_spell_level('jiangshi_yin_essence_reforging') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('jiangshi_yin_essence_reforging') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_UNROTTING_CORPSE_ENHANCEMENT",
    "condition": { "math": [ "u_spell_level('jiangshi_unrotting_corpse_enhancement') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Unrotting Corpse Enhancement", "popup": true },
      { "math": [ "u_spell_level('jiangshi_unrotting_corpse_enhancement') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('jiangshi_unrotting_corpse_enhancement') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_GRAVE_MIST_DISAPPEARANCE",
    "condition": { "math": [ "u_spell_level('jiangshi_grave_mist_disappearance') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Grave Mist Disappearance", "popup": true },
      { "math": [ "u_spell_level('jiangshi_grave_mist_disappearance') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('jiangshi_grave_mist_disappearance') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEARN_JIANGSHI_WHITE",
    "condition": { "u_know_recipe": "wuxia_jiangshi_white_inert" },
    "false_effect": [
      { "u_learn_recipe": "wuxia_jiangshi_white_inert" },
      { "message": "You learned a new recipe - White Jiangshi", "popup": true }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEARN_WOODEN_CASKET",
    "condition": { "u_know_recipe": "wuxia_wooden_casket" },
    "false_effect": [
      { "u_learn_recipe": "wuxia_wooden_casket" },
      { "message": "You learned a new recipe - Wooden Casket", "popup": true }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MEDITATE_LEARN_SOUL_DEVOURING_FINGER",
    "condition": { "and": [ { "not": "u_has_weapon" }, { "math": [ "rand(30) == 1" ] } ] },
    "effect": {
      "weighted_list_eocs": [ [ "EOC_LEVEL_UP_HEAVEN_DEVOURING_ART", 1 ], [ "EOC_LEVEL_UP_SOUL_BURNING_MERIDIAN_REVERSAL", 1 ] ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_HEAVEN_DEVOURING_ART",
    "condition": { "math": [ "u_spell_level('sdf_heaven_devouring_art') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Heaven Devouring Art", "popup": true },
      { "math": [ "u_spell_level('sdf_heaven_devouring_art') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('sdf_heaven_devouring_art') += rand(1000)" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LEVEL_UP_SOUL_BURNING_MERIDIAN_REVERSAL",
    "condition": { "math": [ "u_spell_level('sdf_soul_burning_meridian_reversal') == -1" ] },
    "effect": [
      { "message": "You learned a new technique - Soul Burning Meridian Reversal", "popup": true },
      { "math": [ "u_spell_level('sdf_soul_burning_meridian_reversal') = 0" ] }
    ],
    "false_effect": { "math": [ "u_spell_exp('sdf_soul_burning_meridian_reversal') += rand(1000)" ] }
  }
]
