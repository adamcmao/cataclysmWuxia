[
  {
    "type": "snippet",
    "category": "<SCARLET_KNIFE_PULSE_MESSAGES>",
    "text": [
      "Crimson forms a knife that darts like a living shadow.",
      "A pulse of qi shapes blood into a lethal dart.",
      "A shimmering, scarlet edge erupts from blood.",
      "The knife flies, red as fresh wound, unstoppable as fate.",
      "The pulse sends a slicing ribbon of blood through the air."
    ]
  },
  {
    "type": "snippet",
    "category": "<RED_THREAD_BINDING_MESSAGES>",
    "text": [
      "Blood twists into a fine thread, sealing wounds with crimson silk.",
      "A pulse of life draws a red line that stops the flow.",
      "The wound stops as crimson thread stitches.",
      "A gentle crimson binding knits flesh together.",
      "Red lines curl and tighten, holding the wound in place."
    ]
  },
  {
    "type": "snippet",
    "category": "<RED_ASURA_REVIVAL_ART_MESSAGES>",
    "text": [
      "Crimson qi writhes through the body, forcing it to reshape itself.",
      "Your body convulses as scarlet threads drag flesh back into place.",
      "Limb jerks in rhythm with unseen threads, reconstructing itself.",
      "You shutter as flesh is forced into your open wounds.",
      "The body quivers as missing parts reassemble with painful precision."
    ]
  },
  {
    "type": "snippet",
    "category": "<CRIMSON_BLOOD_SWORD_MESSAGES>",
    "text": [
      "Blood coils in your palm, forming a sword that hungers for your life force.",
      "A sword of blood grows sharp, fed by the user's own essence.",
      "The crimson blade thrums, drawing vitality with every strike.",
      "The sword thrives off your blood, sharp and dangerous in equal measure.",
      "Every swing drains a whisper of life, the sword hungering for more."
    ]
  },
  {
    "type": "snippet",
    "category": "<FLOWING_BLOOD_BLADES_MESSAGES>",
    "text": [
      "Two scarlet blades spiral forward, unstoppable as a river of fate.",
      "Twin swords of living blood pierce enemies as easily as wind through reeds.",
      "Blood blades spiral forward, slicing cleanly through those it meets.",
      "Flowing forward, striking all who dare approach.",
      "Spinning crimson edges shoot out, unstoppable and cruel."
    ]
  },
  {
    "type": "snippet",
    "category": "<HEAVEN_DEVOURING_ART_MESSAGES>",
    "text": [
      "You drive your palm into your opponents center, violently pulling their energy into your body",
      "Hands clamp down as qi is torn from the opponent like breath from lungs.",
      "Qi screams as it is forcefully drawn into your hands.",
      "Palms pulse greedily, drawing power faster than it can resist.",
      "Hands glow ominously as stolen qi floods inward."
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_BLOOD_TINY",
    "effect": [ { "math": [ "u_blood_usage = 100" ] }, { "run_eocs": [ "EOC_USE_BLOOD_OR_GROUND" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_BLOOD_SMALL",
    "effect": [ { "math": [ "u_blood_usage = 1000" ] }, { "run_eocs": [ "EOC_USE_BLOOD_OR_GROUND" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_BLOOD_MEDIUM",
    "effect": [ { "math": [ "u_blood_usage = 3000" ] }, { "run_eocs": [ "EOC_USE_BLOOD_OR_GROUND" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_BLOOD_LARGE",
    "effect": [ { "math": [ "u_blood_usage = 5000" ] }, { "run_eocs": [ "EOC_USE_BLOOD_OR_GROUND" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_BLOOD_HUGE",
    "effect": [ { "math": [ "u_blood_usage = 10000" ] }, { "run_eocs": [ "EOC_USE_BLOOD_OR_GROUND" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_USE_BLOOD_OR_GROUND",
    "effect": [
      {
        "store_coordinates_in": { "context_val": "bloody_ground" },
        "stop_at_first": true,
        "range": 1,
        "condition": { "and": [ { "map_field_id": "fd_blood", "loc": { "context_val": "bloody_ground" } } ] },
        "u_map_run_eocs": [
          {
            "id": "EOC_TEMP",
            "effect": [
              { "math": [ "u_blood_found = 1" ] },
              {
                "u_transform_radius": 0,
                "target_var": { "context_val": "bloody_ground" },
                "ter_furn_transform": "ter_remove_blood"
              }
            ]
          }
        ]
      },
      {
        "if": { "math": [ "u_blood_found == 0" ] },
        "then": [ { "math": [ "u_vitamin('blood') -= u_blood_usage" ] } ],
        "else": { "math": [ "u_blood_found = 0" ] }
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SPAWN_BLOOD_SWORD",
    "effect": {
      "switch": { "math": [ "u_spell_level('crimson_blood_sword')" ] },
      "cases": [
        { "case": 0, "effect": { "u_cast_spell": { "id": "spawn_crimson_blood_sword_actual" } } },
        { "case": 5, "effect": { "u_cast_spell": { "id": "spawn_crimson_blood_sword_actual2" } } },
        { "case": 10, "effect": { "u_cast_spell": { "id": "spawn_crimson_blood_sword_actual3" } } }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_HEAVEN_DEVOURING_ART_START",
    "condition": {
      "or": [
        { "not": { "u_has_species": "JIANGSHI" } },
        { "not": { "u_has_species": "ZOMBIE" } },
        { "not": { "u_has_effect": "effect_qi_drained" } }
      ]
    },
    "effect": [
      { "u_location_variable": { "context_val": "loc" } },
      { "u_add_effect": "effect_qi_drained", "duration": "10 hours" },
      { "math": [ "n_vitamin('qi_vitamin') += (rand(n_spell_level('heaven_devouring_art')*5)+50)" ] },
      {
        "weighted_list_eocs": [ [ "EOC_HEAVEN_DEVOURING_ART_VISION", 1 ], [ "EOC_HEAVEN_DEVOURING_ART_HALLUCINATE", 1 ] ]
      }
    ],
    "false_effect": [ { "message": "Something is wrong, you are unable to drain qi from this victim.", "type": "mixed" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_HEAVEN_DEVOURING_ART_VISION",
    "condition": { "not": { "npc_has_effect": "visuals" } },
    "effect": [ { "message": "Your vision blurs", "type": "bad" }, { "npc_add_effect": "visuals", "duration": [ 15, 60 ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_HEAVEN_DEVOURING_ART_HALLUCINATE",
    "effect": [
      {
        "message": "As your absorb the energy, your fate is intertwined with your victim, and you see all timelines that could have been.",
        "type": "bad"
      },
      {
        "npc_spawn_monster": "",
        "hallucination_count": [ 10, 15 ],
        "target_range": 10,
        "max_radius": 10,
        "lifespan": [ "15 seconds", "1 minutes" ]
      }
    ]
  }
]
