[
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_START",
    "condition": { "not": { "u_has_effect": "effect_wind_following_steps" } },
    "effect": [
      { "u_add_effect": "effect_wind_following_steps", "duration": "PERMANENT" },
      {
        "run_eocs": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
        "time_in_future": [
          { "math": [ "(u_spell_level('wind_following_steps') * 5)" ] },
          { "math": [ "(u_spell_level('wind_following_steps') * 10)" ] }
        ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_WIND_FOLLOWING_STEPS_STOP" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
    "condition": { "and": [ { "u_has_effect": "effect_wind_following_steps" }, { "math": [ "u_vitamin('qi_vitamin') >= 50" ] } ] },
    "effect": [
      { "run_eocs": "EOC_LOSE_50_QI" },
      {
        "run_eocs": "EOC_WIND_FOLLOWING_STEPS_DRAIN",
        "time_in_future": [
          { "math": [ "(u_spell_level('wind_following_steps') * 5)" ] },
          { "math": [ "(u_spell_level('wind_following_steps') * 10)" ] }
        ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_WIND_FOLLOWING_STEPS_STOP" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_WIND_FOLLOWING_STEPS_STOP",
    "condition": { "u_has_effect": "effect_wind_following_steps" },
    "effect": [ { "u_lose_effect": "effect_wind_following_steps" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_START",
    "condition": {
      "or": [
        { "u_has_effect": "poison" },
        { "u_has_effect": "poison", "bodypart": "head" },
        { "u_has_effect": "poison", "bodypart": "torso" },
        { "u_has_effect": "poison", "bodypart": "arm_r" },
        { "u_has_effect": "poison", "bodypart": "arm_l" },
        { "u_has_effect": "poison", "bodypart": "leg_r" },
        { "u_has_effect": "poison", "bodypart": "leg_l" },
        { "u_has_effect": "badpoison" },
        { "u_has_effect": "badpoison", "bodypart": "head" },
        { "u_has_effect": "badpoison", "bodypart": "torso" },
        { "u_has_effect": "badpoison", "bodypart": "arm_r" },
        { "u_has_effect": "badpoison", "bodypart": "arm_l" },
        { "u_has_effect": "badpoison", "bodypart": "leg_r" },
        { "u_has_effect": "badpoison", "bodypart": "leg_l" },
        { "u_has_effect": "venom_dmg" },
        { "u_has_effect": "venom_weaken" },
        { "u_has_effect": "venom_blind" },
        { "u_has_effect": "venom_pain" },
        { "u_has_effect": "paralyzepoison" }
      ]
    },
    "effect": [
      { "u_message": "Your body convulses as you feel the poison move inside you." },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_POISON",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_BADPOISON",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      },
      {
        "run_eocs": "EOC_THREE_NEEDLES_DRAW_VENOM_VENOM",
        "time_in_future": [
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*50" ] },
          { "math": [ "5000-u_spell_level('three_needles_draw_venom')*100" ] }
        ]
      }
    ],
    "false_effect": [ { "u_message": "You're not suffering from poisoning and have nothing to detoxify.", "type": "good" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_POISON",
    "condition": {
      "or": [
        { "u_has_effect": "poison" },
        { "u_has_effect": "poison", "bodypart": "head" },
        { "u_has_effect": "poison", "bodypart": "torso" },
        { "u_has_effect": "poison", "bodypart": "arm_r" },
        { "u_has_effect": "poison", "bodypart": "arm_l" },
        { "u_has_effect": "poison", "bodypart": "leg_r" },
        { "u_has_effect": "poison", "bodypart": "leg_l" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_1", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      { "u_lose_effect": [ "poison" ], "target_part": "ALL" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_BADPOISON",
    "condition": {
      "or": [
        { "u_has_effect": "badpoison" },
        { "u_has_effect": "badpoison", "bodypart": "head" },
        { "u_has_effect": "badpoison", "bodypart": "torso" },
        { "u_has_effect": "badpoison", "bodypart": "arm_r" },
        { "u_has_effect": "badpoison", "bodypart": "arm_l" },
        { "u_has_effect": "badpoison", "bodypart": "leg_r" },
        { "u_has_effect": "badpoison", "bodypart": "leg_l" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_2", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      { "u_lose_effect": [ "badpoison" ], "target_part": "ALL" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THREE_NEEDLES_DRAW_VENOM_VENOM",
    "condition": {
      "or": [
        { "u_has_effect": "venom_dmg" },
        { "u_has_effect": "venom_weaken" },
        { "u_has_effect": "venom_blind" },
        { "u_has_effect": "venom_pain" },
        { "u_has_effect": "paralyzepoison" }
      ]
    },
    "effect": [
      { "u_spawn_item": "wuxia_poison_pill_tier_1", "suppress_message": true },
      { "u_set_field": "fd_blood", "radius": 0, "intensity": 1 },
      {
        "u_lose_effect": [ "venom_dmg", "venom_weaken", "venom_blind", "venom_pain", "paralyzepoison" ],
        "target_part": "ALL"
      }
    ]
  }
]
